# AYNI Core - Ports and Endpoints Registry

## Purpose
MANDATORY tracking of all ports, URLs, and endpoints used during development.
This file must be updated EVERY time a port/url/endpoint is created or modified.

## Local Development Ports

### Backend (Django)
- **Port**: 8000
- **URL**: http://localhost:8000
- **Usage**: Django development server
- **Command**: `python manage.py runserver`

### Frontend (React)
- **Port**: 3000
- **URL**: http://localhost:3000
- **Usage**: React development server (Vite)
- **Command**: `npm run dev`

### Database (PostgreSQL)
- **Port**: 5432
- **URL**: postgresql://localhost:5432/ayni_dev
- **Usage**: Local PostgreSQL instance

### Redis
- **Port**: 6379
- **URL**: redis://localhost:6379
- **Usage**: Cache and Celery broker

### Celery Flower (Monitoring)
- **Port**: 5555
- **URL**: http://localhost:5555
- **Usage**: Celery task monitoring

## API Endpoints (Django)

### Authentication
- POST   /api/auth/register/
- POST   /api/auth/login/
- POST   /api/auth/logout/
- GET    /api/auth/me/
- POST   /api/auth/refresh/

### Companies
- GET    /api/companies/                 # List user's companies
- POST   /api/companies/                 # Create company
- GET    /api/companies/{id}/            # Get company details
- PUT    /api/companies/{id}/            # Update company
- DELETE /api/companies/{id}/            # Delete company

### Uploads & Processing
- POST   /api/uploads/                   # Upload CSV
- GET    /api/uploads/                   # List uploads
- GET    /api/uploads/{id}/              # Get upload details
- GET    /api/uploads/{id}/status/       # Get processing status
- GET    /api/uploads/{id}/download/     # Download processed file
- POST   /api/uploads/{id}/mappings/     # Set column mappings

### Analytics
- GET    /api/analytics/dashboard/       # Main dashboard
- GET    /api/analytics/monthly/         # Monthly metrics
- GET    /api/analytics/quarterly/       # Quarterly metrics
- GET    /api/analytics/yearly/          # Yearly metrics
- GET    /api/analytics/benchmarks/      # Industry benchmarks
- GET    /api/analytics/buffs-debuffs/   # Economic indicators

### AI/ML
- POST   /api/ai/query/                  # Natural language query
- GET    /api/ai/insights/               # Generated insights

### Admin
- /admin/                                # Django admin interface

## WebSocket Endpoints

### Processing Updates
- ws://localhost:8000/ws/uploads/{upload_id}/

### Real-time Analytics
- ws://localhost:8000/ws/analytics/{company_id}/

## Staging Environment

### Backend (Railway)
- **URL**: https://ayni-backend-staging.railway.app
- **API**: https://ayni-backend-staging.railway.app/api/

### Frontend (Render)
- **URL**: https://ayni-frontend-staging.onrender.com

### Database (Railway)
- **Host**: postgres.railway.internal
- **Port**: 5432
- **Database**: railway

## Production Environment

### Backend (Railway)
- **URL**: https://ayni-backend.railway.app
- **API**: https://ayni-backend.railway.app/api/

### Frontend (Render)
- **URL**: https://app.ayni.cl

### Database (Railway)
- **Host**: postgres.railway.internal
- **Port**: 5432
- **Database**: railway

## External Services

### Macro Economic API
- **Provider**: [To be determined]
- **Endpoint**: https://api.economic-indicators.cl/v1/

### Email Service
- **Provider**: SendGrid
- **API**: https://api.sendgrid.com/v3/

### Error Tracking
- **Provider**: Sentry
- **DSN**: https://[key]@sentry.io/[project]

## Environment Variables

### Required in .env
```
# Django
DJANGO_PORT=8000
SECRET_KEY=your-secret-key
DEBUG=True

# Database
DATABASE_URL=postgresql://user:password@localhost:5432/ayni_dev

# Redis
REDIS_URL=redis://localhost:6379

# Frontend
REACT_APP_API_URL=http://localhost:8000/api
REACT_APP_WS_URL=ws://localhost:8000/ws

# AWS (for file storage)
AWS_ACCESS_KEY_ID=your-key
AWS_SECRET_ACCESS_KEY=your-secret
AWS_STORAGE_BUCKET_NAME=ayni-uploads

# Celery
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/1
```

---

**IMPORTANT**: Update this file immediately when:
- Adding a new service or port
- Creating a new API endpoint
- Setting up a new environment
- Changing any URL or port configuration

**Last Updated**: 2024-11-04
**Maintained By**: Development Team